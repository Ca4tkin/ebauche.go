<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Ebauche Wiki</title>
    <link href="style.css" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans|PT+Sans+Caption|Inconsolata&subset=latin,cyrillic'
          rel='stylesheet'>
</head>
<body>

<div class="page">
    <nav class="navigation">
        <div class="level">
            <div class="node">
                <div class="actions">
                    <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                </div>
                <a href="/wiki/">Jar Jar Binks' Wiki</a>
            </div>

            <div class="level">
                <div class="node">
                    <div class="actions">
                        <button class="remove-node link fa fa-trash-o smallish" title="Remove node"></button>
                        <form class="popup remove" method="delete" action="/wiki">
                            <button class="link close fa fa-times smallish" type="reset"></button>
                            <input type="hidden" name="id" value="/boom-boom-usage">

                            <div class="field">
                                <label>
                                    <input type="radio" name="mode" value="recursive" checked>
                                    Delete the node and all its children recursivelly
                                </label>
                            </div>
                            <div class="field">
                                <label>
                                    <input type="radio" name="mode" value="hoist">
                                    Delete the node and append its children to the node's parent
                                </label>
                            </div>
                            <button class="submit" type="submit">Proceed</button>
                            <button class="link cancel" type="reset">Cancel</button>
                        </form>

                        <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        <form class="popup create" method="post" action="/wiki">
                            <button class="link close fa fa-times smallish" type="reset"></button>
                            <p>Create a node with title:</p>
                            <input type="hidden" name="parent" value="/boom-boom-usage">

                            <div class="field">
                                <input type="text" name="title" placeholder="Title" required>
                            </div>
                            <button class="submit" type="submit">Create</button>
                            <button class="link cancel" type="reset">Cancel</button>
                        </form>
                    </div>
                    <a href="">Boom Boom Usage</a>
                </div>

                <div class="level">
                    <div class="node">
                        <div class="actions">
                            <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                            <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        </div>
                        <a href="">Safety Measures</a>
                    </div>

                    <div class="level">
                        <div class="node">
                            <div class="actions">
                                <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                                <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                            </div>
                            <a href="">Active</a>
                        </div>
                    </div>
                    <div class="level">
                        <div class="node">
                            <div class="actions">
                                <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                                <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                            </div>
                            <a href="">Passive</a>
                        </div>
                    </div>
                </div>
                <div class="level">
                    <div class="node">
                        <div class="actions">
                            <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                            <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        </div>
                        <a href="">Tactics</a>
                    </div>
                </div>
            </div>
            <div class="level">
                <div class="node">
                    <div class="actions">
                        <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                        <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                    </div>
                    <a href="">Tongue Techniques</a>
                </div>
            </div>
            <div class="level">
                <div class="node">
                    <div class="actions">
                        <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                        <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                    </div>
                    <a href="">Articles</a>
                </div>
                <div class="level">
                    <div class="node">
                        <div class="actions">
                            <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                            <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        </div>
                        <a href="">How To Make Friends</a>
                    </div>
                </div>
                <div class="level">
                    <div class="node">
                        <div class="actions">
                            <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                            <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        </div>
                        <a href="">From Loser to Emperor</a>
                    </div>
                </div>
                <div class="level">
                    <div class="node">
                        <div class="actions">
                            <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                            <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        </div>
                        <a href="">Water World of Naboo</a>
                    </div>
                </div>
                <div class="level">
                    <div class="node">
                        <div class="actions">
                            <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                            <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        </div>
                        <a href="">Under The Hood</a>
                    </div>
                </div>
                <div class="level">
                    <div class="node">
                        <div class="actions">
                            <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                            <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                        </div>
                        <a href="">Dinosaur Riding</a>
                    </div>
                </div>
            </div>
            <div class="level">
                <div class="node">
                    <div class="actions">
                        <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                        <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                    </div>
                    <a href="">Biography</a>
                </div>
            </div>
            <div class="level">
                <div class="node">
                    <div class="actions">
                        <button class="link fa fa-trash-o smallish" title="Remove node"></button>
                        <button class="create-node link fa fa-plus smallish" title="Add child"></button>
                    </div>
                    <a href="">The Incredible Story of Naboo Rulers</a>
                </div>
            </div>
        </div>
    </nav>
    <div class="edit-wrapper">
        <div id="toolbar" class="edit no-edit-mode">
            <button class="link fa fa-sign-in" title="Sign in"></button>
            <!--<button class="link fa fa-sign-out"></button>-->
            <button id="toggle-edit" class="link fa fa-edit" title="Toggle edit mode"></button>
            <button class="link fa fa-floppy-o" title="Save"></button>
            <button id="scale-up" class="link fa fa-sort-asc" title="Font size +"></button>
            <button id="scale-down" class="link fa fa-sort-desc" title="Font size -"></button>
            <button class="link fa fa-bold" title="Bold/unbold selection"></button>
            <button class="link fa fa-italic" title="Italicise/deitalicise selection"></button>
            <button class="link fa fa-file-code-o" title="Code block"></button>
            <button class="link fa fa-code" title="Inline code"></button>
            <button class="link fa fa-link" title="Link"></button>
            <button class="link fa fa-external-link" title="External link"></button>
            <button class="link fa fa-check-square-o" title="Checkbox"></button>
            <button class="link fa fa-list-ul" title="Unordered list"></button>
            <button class="link fa fa-list-ol" title="Ordered list"></button>
        </div>
    </div>
    <article class="article">
        <div class="article__heading">
            <h1 class="article__header">Lorem ipsum</h1>
        </div>
        <section class="article__section" id="content">

            <p class="article__paragraph">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet assumenda aut,
                facere facilis, id ipsum
                laborum, nam natus non provident quae quod ratione recusandae. Architecto enim eos in inventore
                provident?
            </p>

            <p class="article__paragraph">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Autem error officia pariatur tenetur.
                Aspernatur blanditiis corporis ea, illo illum nesciunt odio, officiis optio praesentium repellendus
                sequi
                tempora tenetur totam vel.</p>
        </section>
        <section class="article__section">
            <h2 class="article__header2">Dolor sit amet</h2>

            <p class="article__paragraph">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus at autem doloribus error facilis
                itaque labore laudantium nihil, numquam quis quos, repudiandae sunt veniam? Cum nam nihil officia
                quas repudiandae!</p>
            <ul class="article__unodered-list">
                <li class="article__unodered-list-item">
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Asperiores delectus dolore doloribus
                    explicabo,
                    ipsum labore minima molestiae non pariatur quo rem, saepe vero voluptatum! A aliquid cupiditate
                    dolorum
                    iste
                    veniam.
                </li>
                <li class="article__unodered-list-item">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aspernatur, cum dolorum enim,
                    error
                    expedita facilis ipsam ipsum laudantium magnam molestias natus officia officiis provident quia
                    quidem
                    reiciendis tempora voluptates.
                </li>
                <li class="article__unodered-list-item">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet assumenda, corporis cum cupiditate,
                    debitis
                    ea est ex illo laboriosam nesciunt odit officia omnis quam quod, vitae. Accusantium at fuga
                    molestias.
                </li>
                <li class="article__unodered-list-item">Github OAuth 2.0 <a class="article__internal-link" href="#">demo</a></li>
                <li class="article__unodered-list-item">Google OAuth 2.0 <a class="article__internal-link" href="#">demo</a></li>
                <li class="article__unodered-list-item">Google OpenId 2.0 <a class="article__external-link" href="example.org">demo</a></li>
            </ul>
            <ol class="article__ordered-list">
                <li class="article__odered-list-item">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab accusantium ad alias delectus
                    doloremque,
                    esse
                    eum excepturi explicabo illum laudantium magnam maiores nemo nostrum quam quasi reprehenderit
                    soluta,
                    ut,
                    voluptas.
                </li>
                <li class="article__odered-list-item">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eos in necessitatibus omnis vero! Autem
                    blanditiis
                    repudiandae soluta vel voluptatem? Cupiditate dolores enim explicabo laborum magni nihil pariatur
                    quam
                    quas
                    reiciendis.
                </li>
                <li class="article__odered-list-item">Lorem ipsum dolor sit amet, consectetur adipisicing elit. A adipisci aliquam doloremque laborum
                    maxime
                    molestiae reiciendis similique. Adipisci deleniti dignissimos dolor error, esse fuga perferendis
                    placeat
                    repudiandae sapiente similique tempora.
                </li>
                <li class="article__odered-list-item">Github OAuth 2.0 <a href="#">demo</a></li>
                <li class="article__odered-list-item">Google OpenId 2.0 <a href="example.org">demo</a></li>
            </ol>
            <ul class="article__todo-list">
                <li class="article__todo-list-item"><input class="article__todo-list-checkbox" type="checkbox" checked disabled>Cats</li>
                <li class="article__todo-list-item"><input class="article__todo-list-checkbox" type="checkbox" disabled>Dogs</li>
                <li class="article__todo-list-item"><input class="article__todo-list-checkbox" type="checkbox" disabled>Birds</li>
            </ul>
            <p class="article__paragraph">Lorem ipsum dolor sit amet, <code>consectetur adipisicing elit</code>. Alias est et facilis fugit illum
                iusto
                laborum quibusdam, voluptatibus? Assumenda consequuntur in modi nemo optio quia, quis rerum sapiente
                velit
                veritatis?</p>
            <pre>
Gello {
    color: green;
    padding: 10%;
}

.hello__greeting {
    margin-bottom: 12px;
}

.hello__input {
    margin-right: 12px;
}
           </pre>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Asperiores delectus dolore</p>
        </section>
    </article>
    <div class="clearfix"></div>

    <footer class="page-wrapper">
        <p>
            Copyright &copy; 2015 Jar Jar Binks.
            Powered by <a href="//github.com/sulnedinfind/ebauche.go">Ebauche wiki engine.</a>
        </p>
    </footer>
</div>

<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
    $(document).ready(function () {
        $(document).on('mousedown', function (e) {
            const $popup = $(e.target).closest('.popup');

            if ($popup.length) {
                $popup.one().addClass('active');
            } else {
                $('.popup').each(function () {
                    $(this).removeClass('active');
                });
            }
        });

        $('.close, .cancel').each(function () {
            $(this).on('click', function () {
                $('.popup').removeClass('active');
            });
        });

        $('#toggle-edit').on('click', toggleEditing);
        $('#scale-up').on('click', scaleUp);
        $('#scale-down').on('click', scaleDown);

        function scaleUp() {
            scale(true);
        }

        function scaleDown() {
            scale(false);
        }

        function restoreEditableFocus() {
            console.error("Not supported yet");
        }

        function scale(up) {
            var tags = ['P', 'H4', 'H3', 'H2'];
            var lastIndex = tags.length - 1;
            var e = getElementAtCaret();
            var tag = e.tagName;
            var index = tags.indexOf(tag);

            if (index === -1) {
                console.log('tried to scale ' + tag);
                return;
            }

            var newIndex = index + (up ? 1 : -1);

            if (newIndex < 0) newIndex = 0;
            if (newIndex > lastIndex) newIndex = lastIndex;

            var newTag = tags[newIndex];
            var newElem = $('<' + newTag + '/>');
            var elem = $(e);

            newElem.html(elem.html());
            elem.replaceWith(newElem);

            restoreEditableFocus();
        }

        function getElementAtCaret() {
            var node = document.getSelection().anchorNode;
            return (node.nodeType == 3 ? node.parentNode : node);
        }

        function toggleEditing() {
            var content = $('#content');
            var editable = content.attr('contentEditable') === 'true';

            content.attr('contentEditable', !editable);
            $('.heading h1').attr('contentEditable', !editable);
            $('#toolbar').toggleClass('no-edit-mode', editable);
            $('.todo-item input[type="checkbox"]').each(function () {
                $(this).attr('disabled', editable);
            });
        }
    });
</script>
</body>
</html>